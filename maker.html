<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>íŒ©íŠ¸ í­ê²© ì—°êµ¬ì†Œ ì‚¬ì´íŠ¸ë§µ ìƒì„±ê¸°</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; line-height: 1.6; }
        h1 { color: #333; }
        textarea { width: 100%; height: 200px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-family: monospace; }
        button { background-color: #007bff; color: white; border: none; padding: 10px 20px; font-size: 16px; border-radius: 5px; cursor: pointer; margin: 10px 0; }
        button:hover { background-color: #0056b3; }
        .output-area { margin-top: 20px; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <h1>ğŸ—ºï¸ ì‚¬ì´íŠ¸ë§µ(sitemap.xml) ìë™ ìƒì„±ê¸°</h1>
    
    <h3>1ë‹¨ê³„: data.json ë‚´ìš© ë¶™ì—¬ë„£ê¸°</h3>
    <p>ì‘ì„±í•˜ì‹  <code>data.json</code> íŒŒì¼ì˜ ë‚´ìš©ì„ ì „ì²´ ë³µì‚¬í•´ì„œ ì•„ë˜ ì¹¸ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.</p>
    <textarea id="jsonInput" placeholder='[
  {
    "title": "ì „ê¸°ì°¨...",
    "url": "./ev/index.html"
  },
  ...
]'></textarea>

    <button onclick="generateSitemap()">ì‚¬ì´íŠ¸ë§µ ë§Œë“¤ê¸° (í´ë¦­)</button>

    <div id="resultSection" class="hidden">
        <h3>2ë‹¨ê³„: ê²°ê³¼ í™•ì¸ ë° ë‹¤ìš´ë¡œë“œ</h3>
        <p>ì•„ë˜ ë‚´ìš©ì„ ë³µì‚¬í•´ì„œ ë©”ëª¨ì¥ì— <code>sitemap.xml</code>ë¡œ ì €ì¥í•˜ê±°ë‚˜, ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</p>
        <textarea id="xmlOutput"></textarea>
        <button onclick="downloadSitemap()" style="background-color: #28a745;">ğŸ’¾ sitemap.xml ë‹¤ìš´ë¡œë“œ</button>
    </div>

    <script>
        function generateSitemap() {
            const input = document.getElementById('jsonInput').value;
            const today = new Date().toISOString().split('T')[0];
            const domain = "http://factbomber.kr";

            try {
                const data = JSON.parse(input);
                
                let xml = '<?xml version="1.0" encoding="UTF-8"?>\n';
                xml += '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n';

                // 1. ë©”ì¸ í˜ì´ì§€
                xml += '  <url>\n';
                xml += `    <loc>${domain}/</loc>\n`;
                xml += `    <lastmod>${today}</lastmod>\n`;
                xml += '    <priority>1.0</priority>\n';
                xml += '  </url>\n';

                // 2. ì„œë¸Œ í˜ì´ì§€ë“¤
                data.forEach(item => {
                    // ì£¼ì†Œ ì•ì˜ì (.) ì œê±°
                    let cleanUrl = item.url.replace(/^\./, '');
                    
                    xml += '  <url>\n';
                    xml += `    <loc>${domain}${cleanUrl}</loc>\n`;
                    xml += `    <lastmod>${today}</lastmod>\n`;
                    xml += '    <priority>0.8</priority>\n';
                    xml += '  </url>\n';
                });

                xml += '</urlset>';

                document.getElementById('xmlOutput').value = xml;
                document.getElementById('resultSection').classList.remove('hidden');

            } catch (e) {
                alert("ì˜¤ë¥˜! data.json ë‚´ìš©ì„ ì˜¬ë°”ë¥´ê²Œ ë¶™ì—¬ë„£ì—ˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.\n\n" + e.message);
            }
        }

        function downloadSitemap() {
            const xmlContent = document.getElementById('xmlOutput').value;
            const blob = new Blob([xmlContent], { type: "text/xml" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "sitemap.xml";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>